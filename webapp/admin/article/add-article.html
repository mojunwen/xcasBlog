<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>Table</title>
		<link rel="stylesheet" href="../plugins/layui/css/layui.css" media="all" />
		<link rel="stylesheet" href="../css/global.css" media="all">
		<link rel="stylesheet" href="../plugins/font-awesome/css/font-awesome.min.css">
		<link rel="stylesheet" href="../css/table.css" />
	</head>
    <body style="padding: 26px;">
        <form class="layui-form" style="width: 400px;">
            <div class="layui-form-item">
                <label class="layui-form-label">输入标题</label>
                <div class="layui-input-block">
                    <input type="text" name="" placeholder="请输入" autocomplete="off" class="layui-input" data-val="title">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">选择分类</label>
                <div class="layui-input-block">
                    <input type="text" name="" placeholder="请输入" autocomplete="off" class="layui-input" data-val="categoryId">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">上传封面</label>
                <div class="layui-input-block">
                    <input type="text" name="" placeholder="请输入" autocomplete="off" class="layui-input" data-val="imgName">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">输入文章内容</label>
                <div class="layui-input-block">
                    <input type="text" name="" placeholder="请输入" autocomplete="off" class="layui-input" data-val="description">
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-input-block">
                    <button id="submitBtn" class="layui-btn" lay-filter="*">立即提交</button>
                    <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                </div>
            </div>
        </form>

        <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
        <script>
            $('#submitBtn').on('click', function(){
                var obj = {};
                $('form').find('[data-val]').each(function(i, item){
                    obj[$(item).attr('data-val')] = $(item).val();
                });
                obj.userId = 1;
                $.ajax({
                    type: 'post',
                    url: '/reprintArticle/addArticle.node',
                    data: JSON.stringify(obj),
                    contentType: 'application/json',
                    success: function(data){
                        if(data === 'success'){
                            
                            parent.layer.closeAll('iframe');
                            parent.layer.msg('成功添加文章');
                        }
                    }
                })
            })
        </script>
    </body>
</html>